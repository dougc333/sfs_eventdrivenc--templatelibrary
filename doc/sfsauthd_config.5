.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "SFSAUTHD_CONFIG 5"
.TH SFSAUTHD_CONFIG 5 "2006-07-20" "SFS 0.8pre" "SFS 0.8pre"
.SH "NAME"
sfsauthd_config \- user\-authentication daemon configuration
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
.IP "Hostname \fIname\fR" 4
.IX Item "Hostname name"
Set the \fILocation\fR part of the server's self-certifying pathname.
The default is the current host's fully-qualified hostname.
.IP "Keyfile \fIpath\fR" 4
.IX Item "Keyfile path"
Tells \fBsfsrwsd\fR to look for its private key in file \fIpath\fR.
The default is \fIsfs_host_key\fR.  \s-1SFS\s0 looks for file names that do
not start with \fI/\fR in \fI/etc/sfs\fR, or whatever directory you
specified if you used the \fB\-with\-etcdir\fR option to
\&\fBconfigure\fR ().
.IP "Userfile [\-update] [\-create] [\-passwd] [\-admin] [\-hideusers] [\-pub=\fIpubpath\fR] [\-prefix=\fIprefix\fR] [\-uid=\fIuid\fR | \-uidmap=\fIu1\fR\-\fIu2\fR+\fIu3\fR] [\-gid=\fIgid\fR | \-gidmap=\fIg1\fR\-\fIg2\fR+\fIg3\fR] [\-groups=\fIg1\fR\-\fIg2\fR] [\-groupquota=\fIlimit\fR] [\-refresh=\fIseconds\fR] [\-timeout=\fIseconds\fR] \fIpath\fR" 4
.IX Item "Userfile [-update] [-create] [-passwd] [-admin] [-hideusers] [-pub=pubpath] [-prefix=prefix] [-uid=uid | -uidmap=u1-u2+u3] [-gid=gid | -gidmap=g1-g2+g3] [-groups=g1-g2] [-groupquota=limit] [-refresh=seconds] [-timeout=seconds] path"
This specifies a file in which \fBsfsauthd\fR should look for user
public keys when authenticating users.  You can specify multiple
\&\fBUserfile\fR directives to use multiple files.  This can be useful in
an environment where most user accounts are centrally maintained, but a
particular server has a few locally-maintained guest (or root) accounts.
.Sp
If \fBsfsauthd\fR has been compiled with
Sleepycat database (\fIhttp://www.sleepycat.com/\fR) support, and
\&\fIpath\fR ends in \fI.db/\fR, \fBvidb\fR will consider the user
authentication file to be a database directory.  This offers
considerably greater efficiency for large databases, as databases
directories most operations O(log n) rather than O(n) for flat text
files.  If \fIpath\fR ends in \fI.db\fR, it is assumed to be a
database file.  Database files are similar to database directories,
but can only be used for read-only databases (as they do not support
atomic transactions).  Database files should be used to export
databases via the \fB\-pub=\fR\fIpubpath\fR option, and to import
read-only databases (by omitting the \fB\-update\fR option).
.Sp
Userfile has the following options:
.RS 4
.IP "\-update" 4
.IX Item "-update"
Specifies a user database as updatable.  Users can register new public
keys, update their public keys, and change their server key
information on writable databases.  If this command is not given, the
database is assumed to be read-only and possibly on a remote machine.
Thus, \fBsfsauthd\fR maintains local copies of read-only databases
in \fI/var/sfs/authdb\fR.  This process ensures that
temporarily unavailable file servers never disrupt
\&\fBsfsauthd\fR's operation.
.IP "\-create" 4
.IX Item "-create"
Create an empty \fIsfs_users\fR file if no such file exists.
.IP "\-passwd" 4
.IX Item "-passwd"
Treat the Unix passwd file (\fI/etc/passwd\fR on most machines) as
part of this userfile.  Use password, shell and home directory
information.  Allows users who do not exist in the database to log
into \fBsfsauthd\fR with their \s-1UNIX\s0 password, so that they
might register an \s-1SFS\s0 key (note this also requires the
\&\fB\-update\fR flag).  See \fIsfskey register\fR, for details on
this. Also important for proper functioning of \fBrexd\fR.
.IP "\-admin" 4
.IX Item "-admin"
Allow an \s-1SFS\s0 administrator to make changes to user records that have
the admin flag set in their \fBprivs\fR field.
.IP "\-hideusers" 4
.IX Item "-hideusers"
When replying to group queries, replace local user names (that appear in
the ownership or membership lists) with a hash of the user's public key.
.IP "\-pub=\fIpubpath\fR" 4
.IX Item "-pub=pubpath"
\&\fBsfsauthd\fR supports the secure remote password protocol, or \s-1SRP\s0.
\&\s-1SRP\s0 lets users connect securely to \fBsfsauthd\fR with their
passwords, without needing to remember the server's public key.  To
prove its identity through \s-1SRP\s0, the server must store secret data
derived from a user's password.  The file \fIpath\fR specified in
\&\fBUserfile\fR contains these secrets for users opting to use \s-1SRP\s0.  The
\&\fB\-pub\fR option tells \fBsfsauthd\fR to maintain in
\&\fIpubpath\fR a separate copy of the database without secret
information.  \fIpubpath\fR might reside on an anonymously readable \s-1SFS\s0
file system\*(--other machines can then import the file as a read-only
database using a \fBUserfile\fR line with the \fB\-update\fR
flag.
.IP "\-prefix=\fIprefix\fR" 4
.IX Item "-prefix=prefix"
Prepend the prefix \fIprefix\fR to usernames in the given userfile.
.IP "\-uid=\fIuid\fR" 4
.IX Item "-uid=uid"
.PD 0
.IP "\-uidmap=\fIu1\fR\-\fIu2\fR+\fIu3\fR" 4
.IX Item "-uidmap=u1-u2+u3"
.PD
These options are mutually exclusive.  The first maps every user's credentials
in the given file to the given \s-1UID\s0, \fIuid\fR.  The second maps users in
the \s-1UID\s0 range (\fIu1\fR to \fIu2\fR) to the offset \fIu3\fR.  For example, if
you wanted to map users to 1000\-2520 to 61000\-62520, you would supply
\&\-uidmap=1000\-2520+60000.
.IP "\-gid=\fIgid\fR" 4
.IX Item "-gid=gid"
.PD 0
.IP "\-gidmap=\fIg1\fR\-\fIg2\fR+\fIg3\fR" 4
.IX Item "-gidmap=g1-g2+g3"
.PD
See above.  Functions the same as \fBuid\fR and \fBuidmap\fR, but 
applies to group IDs, rather than user IDs.  Again, these options
are mutually exclusive.
.IP "\-groups=\fIg1\fR\-\fIg2\fR" 4
.IX Item "-groups=g1-g2"
This option tells \fBsfsauthd\fR to allow regular (non\-admin) users
to add groups.  New group IDs will be in the range \fIg1\fR to \fIg2\fR.
Administrators can establish per-user quotas to limit the number of
groups that a particular user can create.  User quotas are listed in
the \fIprivs\fR field of user records as \*(L"groupquota\*(R"=\fIquota\fR where
\&\fIquota\fR is an unsigned integer.
.IP "\-groupquota=\fIlimit\fR" 4
.IX Item "-groupquota=limit"
Set the default maximum number of groups that any non-administrative user
can create.  Administrative users have the `admin' keyword in the `privs'
field of their user entry.  The authentication server also looks for the
pattern `groupquota=<limit>' in the user record; if found, that per-user
quota takes precedence and overrides this global (UserFile\-wide) setting.
If no group quota is specified in either place, the number of groups that a
user can create is unlimited.
.IP "\-refresh=\fIseconds\fR" 4
.IX Item "-refresh=seconds"
This option allows the administrator to set a default refresh value for
newly created users and/or groups in this database.  The refresh value is
stored with the user and/or group record and is retured with the record in
response to database queries.  The refresh value tells the entity who is
fetching the record that it can continue to use its cached copy of this
record for \fIseconds\fR seconds since the last time it was successfully
updated.  That is, the record does not need refreshing for at least
\&\fIseconds\fR seconds.  If unspecified, the current system default is 3600
seconds (1 hour).
.IP "\-timeout=\fIseconds\fR" 4
.IX Item "-timeout=seconds"
This option allows the administrator to set a default timeout value for
newly created users and/or groups in this database.  The timeout value is
stored with the user and/or group record and is retured with the record in
response to database queries.  The timeout value tells the entity who is
fetching the record that\*(--in the event that the authentication server is
unavailable\*(--the entity can continue to use its cached copy of this
record for \fIseconds\fR seconds since the last time it was successfully
updated.  If unspecified, the current system default is 604800 seconds (1
week).
.RE
.RS 4
.Sp
If no \fBUserfile\fR directive is specified, \fBsfsauthd\fR uses
the following default (again, unqualified names are assumed to be in
\&\fI/etc/sfs\fR):
.Sp
.Vb 1
\&  Userfile \-update \-passwd \-pub=sfs_users.pub sfs_users
.Ve
.RE
.IP "DBcache \fIpath\fR" 4
.IX Item "DBcache path"
The \fIpath\fR to the database that holds the authentication server's
cache.  If unspecified, it defaults to one of the two entries shown
below.  The first applies if Sleepycat (BerkeleyDB) support was compiled
in; otherwise, the second entry applies.  If \fIpath\fR begins with a
\&\*(L"/\*(R" (slash), it is taken to be an absolute path.  If not, it is a path
relative to \fI/var/sfs/authdb\fR.
.Sp
.Vb 2
\&  dbcache dbcache.db/
\&  dbcache dbcache
.Ve
.IP "DBcache_refresh_delay \fIseconds\fR" 4
.IX Item "DBcache_refresh_delay seconds"
Specify the frequency (in seconds) that \fBsfsauthd\fR
will attempt to refresh its cache.  This value only serves as a
minimum because the server will not attempt to download a remote
user or group more frequently than its individual refresh value
(set by the remote administrator or user).  The special value 
`off' disables the authentication cache as well as symbolic and/or
recursive groups.  The default is `off'.
.Sp
.Vb 2
\&  dbcache_refresh_delay off
\&  dbcache_refresh_delay 3600
.Ve
.IP "Logfile \fIpath\fR" 4
.IX Item "Logfile path"
Use the logfile given by \fIpath\fR to output the signature log
generated by \fBsfsauthd\fR.  The default logfile is
\&\fI/var/sfs/sign_log\fR.
.IP "SRPfile \fIpath\fR" 4
.IX Item "SRPfile path"
Where to find default parameters for the \s-1SRP\s0 protocol.  Generate such a
file using the \fBsfskey gensrp\fR command. The default is
\&\fIsfs_srp_params\fR.  If the default file does not exist, serving
pre-generated \s-1SRP\s0 parameters is disabled.
.IP "Denyfile \fIpath\fR" 4
.IX Item "Denyfile path"
Specify a file containing a list of users that are to be explicitly
denied the ability to register and update keys on the authserver.  The
default is \fIsfs_deny\fR.  If the default file does not exist, we
assume an empty list.
.IP "Realm \fIname\fR" 4
.IX Item "Realm name"
Define the realm to which this authserver will belong.  Authentication
information (including \s-1SRP\s0) can be shared amongst authservers that are
in the same realm.  Thus, a user that wants to login to a realm, can
contact any authserver in that realm.
.Sp
If the realm directive does \s-1NOT\s0 appear in this file, the authserver will
not join any realm.  This behavior is the default.  If the realm
directive does appear, \fIname\fR cannot be empty.
.Sp
\&\s-1NOTE:\s0 Changing an authserver's realm after users have already registered
using \s-1SRP\s0 requires all users to update their authentication data because
the realm is bound into the stored \s-1SRP\s0 information.  Specifically, each
user will need to run
.Sp
.Vb 1
\&  sfskey update \-r username@authserver
.Ve
.Sp
A user logged on to the authserver can use the hostname \fI\-\fR to
signify the local host:
.Sp
.Vb 1
\&  sfskey update \-r \-
.Ve
.IP "Certpath \fIdir\fR [\fIdir\fR ...]" 4
.IX Item "Certpath dir [dir ...]"
Specify a certification path to return to the client as a result of an
\&\fBsfskey login\fR command; this list of directories will become the
arguments to a dirsearch certprog.  That is, for a certpath "\fIdir1\fR
\&\fIdir2\fR\*(L" the client will add a certprog \*(R"dirsearch \fIdir1\fR
\&\fIdir2\fR" to the user's agent.  The certification path will be tagged
with a prefix equal to the authserver's realm (see above).
.Sp
\&\s-1NOTE:\s0 The certpath directive only makes sense if the authserver is
part of a realm.  The certpath will be ignored if the realm directive
isn't specified.
.Sp
There are three ways to specify a certpath directory:
.Sp
.Vb 1
\&  certpath //dir1 /dir2 @sfs.host.domain,HOSTID/dir2
.Ve
.Sp
which can also be written
.Sp
.Vb 3
\&  certpath //dir1
\&  certpath /dir2
\&  certpath @sfs.host.domain,HOSTID/dir2
.Ve
.Sp
A directory starting with two slashes (\*(L"//\*(R") is considered relative
to the client machine's root (\*(L"/\*(R").  A directory starting with one
slash (\*(L"/\*(R") is relative to the authserver's self-certifying pathname
(the authserver performs the substitution before is sends the dir).
The third form is a fully specified directory on \s-1SFS\s0.
.Sp
The default certpath is empty.
.SH "FILES"
.IX Header "FILES"
.IP "\fI/etc/sfs/sfsauthd_config\fR" 4
.IX Item "/etc/sfs/sfsauthd_config"
.PD 0
.IP "\fI/usr/local/share/sfs/sfsauthd_config\fR" 4
.IX Item "/usr/local/share/sfs/sfsauthd_config"
.PD
user-authentication daemon configuration
.PP
(Files in \fI/etc/sfs\fR supersede default versions in \fI/usr/local/share/sfs\fR.)
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIdirsearch\fR\|(1), \fInewaid\fR\|(1), \fIrex\fR\|(1), \fIsfsagent\fR\|(1), \fIsfskey\fR\|(1), \fIssu\fR\|(1), \fIsfs_config\fR\|(5), \fIsfs_hosts\fR\|(5), \fIsfs_srp_params\fR\|(5), \fIsfs_users\fR\|(5), \fIsfscd_config\fR\|(5), \fIsfsrosd_config\fR\|(5), \fIsfsrwsd_config\fR\|(5), \fIsfssd_config\fR\|(5), \fIsfs_environ\fR\|(7), \fIfunmount\fR\|(8), \fInfsmounter\fR\|(8), \fIsfsauthd\fR\|(8), \fIsfscd\fR\|(8), \fIsfsrosd\fR\|(8), \fIsfsrwcd\fR\|(8), \fIsfsrwsd\fR\|(8), \fIsfssd\fR\|(8), \fIvidb\fR\|(8)
.PP
The full documentation for \fB\s-1SFS\s0\fR is maintained as a Texinfo
manual.  If the \fBinfo\fR and \fB\s-1SFS\s0\fR programs are properly installed
at your site, the command \fBinfo \s-1SFS\s0\fR
should give you access to the complete manual.
.PP
For updates, documentation, and software distribution, please
see the \fB\s-1SFS\s0\fR website at \fIhttp://www.fs.net/\fR.
.SH "AUTHOR"
.IX Header "AUTHOR"
sfsdev@redlab.lcs.mit.edu
